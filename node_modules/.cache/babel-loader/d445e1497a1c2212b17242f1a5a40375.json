{"ast":null,"code":"import _regeneratorRuntime from\"/home/max/Documentos/microsys/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/max/Documentos/microsys/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/max/Documentos/microsys/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from'react';import api from'../../services/api';import{useHistory}from'react-router-dom';import'./profile.css';import AssignmentIndIcon from'@mui/icons-material/AssignmentInd';import EmailIcon from'@mui/icons-material/Email';import PersonIcon from'@mui/icons-material/Person';import ArrowBackIosIcon from'@mui/icons-material/ArrowBackIos';import KeyIcon from'@mui/icons-material/Key';import RemoveRedEyeIcon from'@mui/icons-material/RemoveRedEye';import{AuthContext}from'../../contexts/auth';import VersionApp from'../../components/VersionApp';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Profile(){var history=useHistory();var _useContext=useContext(AuthContext),token=_useContext.token;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),editName=_useState4[0],setEditName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),editMail=_useState6[0],setEditMail=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),editNameInput=_useState8[0],setEditNameInput=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),editMailInput=_useState10[0],setEditMailInput=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),password=_useState12[0],setPassword=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),confirmPassword=_useState14[0],setConfirmPassword=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),newPassword=_useState16[0],setNewPassword=_useState16[1];var _useState17=useState('password'),_useState18=_slicedToArray(_useState17,2),typeInput=_useState18[0],setTypeInput=_useState18[1];var _useState19=useState('password'),_useState20=_slicedToArray(_useState19,2),typeInputNewPassword=_useState20[0],setTypeInputNewPassword=_useState20[1];var _useState21=useState('password'),_useState22=_slicedToArray(_useState21,2),typeInputConfirmPassword=_useState22[0],setTypeInputConfirmPassword=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),areaPassword=_useState24[0],setAreaPassword=_useState24[1];function backHome(){history.push('/home/');}function transformNameInput(){setEditNameInput(true);}function transformEmailInput(){setEditMailInput(true);}function editNameCancel(){setEditNameInput(false);}function editMailCancel(){setEditMailInput(false);}function handleEdit(){return _handleEdit.apply(this,arguments);}function _handleEdit(){_handleEdit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var body;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;body={name:editName,email:editMail};api.defaults.headers.common.Authorization='Bearer '+token;_context.next=5;return api.patch(\"/me\",body);case 5:if(editNameInput===true){setEditNameInput(false);}else{setEditMailInput(false);}getInfoProfile();_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);alert('Erro ao tentar atualizar perfil, o email ultilizado já existe!');console.log(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return _handleEdit.apply(this,arguments);}function transformPasswordInput(){setAreaPassword(true);}function transformCancelAreaPassword(){setAreaPassword(false);}function handleNewPassword(){return _handleNewPassword.apply(this,arguments);}function _handleNewPassword(){_handleNewPassword=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var body;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(password===''||newPassword==='')){_context2.next=5;break;}alert('Preencha todos os campos para trocar de senha.');return _context2.abrupt(\"return\");case 5:if(!(confirmPassword!==newPassword)){_context2.next=8;break;}alert('Por favor insira a nova senha e a confirmação de senha iguais!');return _context2.abrupt(\"return\");case 8:_context2.prev=8;body={password:password,newPassword:newPassword};api.defaults.headers.common.Authorization='Bearer '+token;_context2.next=13;return api.patch(\"/me/newPassword\",body);case 13:alert('Senha atualizada com sucesso!!!');setAreaPassword(false);setPassword('');setNewPassword('');_context2.next=23;break;case 19:_context2.prev=19;_context2.t0=_context2[\"catch\"](8);alert('Erro ao tentar trocar senha, insira a sua senha corretamente!');console.log(\"Erro ao requisitar atroca de senha \\\"/me/newPassword\\\" \".concat(_context2.t0));case 23:case\"end\":return _context2.stop();}}},_callee2,null,[[8,19]]);}));return _handleNewPassword.apply(this,arguments);}function getInfoProfile(){return _getInfoProfile.apply(this,arguments);}function _getInfoProfile(){_getInfoProfile=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return api.get('/me',{headers:{'Content-type':'application/json','Authorization':\"Bearer \".concat(token),'Accept':'*/*'}});case 3:response=_context3.sent;data=response.data;setUserData(data);setEditName(data.name);setEditMail(data.email);_context3.next=14;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](0);alert('Erro ao requisitar informações de perfil, verifique sua internet!');console.log(\"Erro ao requisitar informa\\xE7\\xF5es de perfil do servidor \\\"/me\\\" \".concat(_context3.t0));case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[0,10]]);}));return _getInfoProfile.apply(this,arguments);}useEffect(function(){getInfoProfile();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"containerProfile\",children:[/*#__PURE__*/_jsx(\"div\",{onClick:backHome,children:/*#__PURE__*/_jsx(ArrowBackIosIcon,{id:\"arrow\"})}),!areaPassword?/*#__PURE__*/_jsxs(\"fieldset\",{className:\"viewInfo\",children:[/*#__PURE__*/_jsx(\"legend\",{children:\"Meu Perfil\"}),editNameInput?/*#__PURE__*/_jsxs(\"div\",{className:\"areaInfo\",children:[/*#__PURE__*/_jsx(AssignmentIndIcon,{id:\"iconProfile\"}),/*#__PURE__*/_jsx(\"input\",{value:editName,id:\"inputProfile\",onChange:function onChange(e){return setEditName(e.target.value);},type:\"text\",alt:\"Mudar nome\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleEdit,id:\"buttonProfile\",children:\"Confirmar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:editNameCancel,id:\"buttonProfile\",children:\"Cancelar\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"areaInfo\",children:[/*#__PURE__*/_jsx(AssignmentIndIcon,{id:\"iconProfile\"}),/*#__PURE__*/_jsx(\"label\",{children:userData.name}),/*#__PURE__*/_jsx(\"button\",{onClick:transformNameInput,id:\"buttonProfile\",children:\"Editar\"})]}),editMailInput?/*#__PURE__*/_jsxs(\"div\",{className:\"areaInfo\",children:[/*#__PURE__*/_jsx(EmailIcon,{id:\"iconProfile\"}),/*#__PURE__*/_jsx(\"input\",{value:editMail,id:\"inputProfile\",onChange:function onChange(e){return setEditMail(e.target.value);},type:\"text\",alt:\"Mudar e-mail\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleEdit,id:\"buttonProfile\",children:\"Confirmar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:editMailCancel,id:\"buttonProfile\",children:\"Cancelar\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"areaInfo\",children:[/*#__PURE__*/_jsx(EmailIcon,{id:\"iconProfile\"}),/*#__PURE__*/_jsx(\"label\",{children:userData.email}),/*#__PURE__*/_jsx(\"button\",{onClick:transformEmailInput,id:\"buttonProfile\",children:\"Editar\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"areaInfo\",children:[/*#__PURE__*/_jsx(PersonIcon,{id:\"iconProfile\"}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Usu\\xE1rio(a): \",userData.type]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"areaInfo\",children:[/*#__PURE__*/_jsx(KeyIcon,{id:\"iconProfile\"}),/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:transformPasswordInput,id:\"buttonAreaPassword\",children:\"Trocar de senha\"})})]})]}):/*#__PURE__*/_jsxs(\"fieldset\",{className:\"viewInfo\",children:[/*#__PURE__*/_jsx(\"legend\",{children:\"Troca de senha\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"areaInfo\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Senha:\"}),/*#__PURE__*/_jsx(\"input\",{value:password,id:\"inputProfilePassword\",onChange:function onChange(e){return setPassword(e.target.value);},type:typeInput,alt:\"senha\"}),/*#__PURE__*/_jsx(RemoveRedEyeIcon,{id:\"iconProfile\",onClick:function onClick(){return typeInput==='password'?setTypeInput('text'):setTypeInput('password');}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"areaInfo\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nova senha:\"}),/*#__PURE__*/_jsx(\"input\",{value:newPassword,id:\"inputProfilePassword\",onChange:function onChange(e){return setNewPassword(e.target.value);},type:typeInputNewPassword,alt:\"nova senha\"}),/*#__PURE__*/_jsx(RemoveRedEyeIcon,{id:\"iconProfile\",onClick:function onClick(){return typeInputNewPassword==='password'?setTypeInputNewPassword('text'):setTypeInputNewPassword('password');}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"areaInfo\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Confirmar nova senha:\"}),/*#__PURE__*/_jsx(\"input\",{value:confirmPassword,id:\"inputProfilePassword\",onChange:function onChange(e){return setConfirmPassword(e.target.value);},type:typeInputConfirmPassword,alt:\"confirmar senha\"}),/*#__PURE__*/_jsx(RemoveRedEyeIcon,{id:\"iconProfile\",onClick:function onClick(){return typeInputConfirmPassword==='password'?setTypeInputConfirmPassword('text'):setTypeInputConfirmPassword('password');}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"areaInfo\",children:[/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:handleNewPassword,id:\"buttonPassword\",children:\"Trocar de senha\"})}),/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:transformCancelAreaPassword,id:\"buttonPassword\",children:\"Cancelar\"})})]})]}),/*#__PURE__*/_jsx(VersionApp,{})]});}","map":{"version":3,"sources":["/home/max/Documentos/microsys/src/pages/Profile/index.js"],"names":["React","useState","useEffect","useContext","api","useHistory","AssignmentIndIcon","EmailIcon","PersonIcon","ArrowBackIosIcon","KeyIcon","RemoveRedEyeIcon","AuthContext","VersionApp","Profile","history","token","userData","setUserData","editName","setEditName","editMail","setEditMail","editNameInput","setEditNameInput","editMailInput","setEditMailInput","password","setPassword","confirmPassword","setConfirmPassword","newPassword","setNewPassword","typeInput","setTypeInput","typeInputNewPassword","setTypeInputNewPassword","typeInputConfirmPassword","setTypeInputConfirmPassword","areaPassword","setAreaPassword","backHome","push","transformNameInput","transformEmailInput","editNameCancel","editMailCancel","handleEdit","body","name","email","defaults","headers","common","Authorization","patch","getInfoProfile","alert","console","log","transformPasswordInput","transformCancelAreaPassword","handleNewPassword","get","response","data","e","target","value","type"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport api from '../../services/api';\nimport { useHistory } from 'react-router-dom';\nimport './profile.css';\nimport AssignmentIndIcon from '@mui/icons-material/AssignmentInd';\nimport EmailIcon from '@mui/icons-material/Email';\nimport PersonIcon from '@mui/icons-material/Person';\nimport ArrowBackIosIcon from '@mui/icons-material/ArrowBackIos';\nimport KeyIcon from '@mui/icons-material/Key';\nimport RemoveRedEyeIcon from '@mui/icons-material/RemoveRedEye';\nimport { AuthContext } from '../../contexts/auth';\nimport VersionApp from '../../components/VersionApp';\n\nexport default function Profile(){\n    let history = useHistory();\n    const { token } = useContext(AuthContext);\n    const [userData, setUserData] = useState('');\n    const [editName, setEditName] = useState('');\n    const [editMail, setEditMail] = useState('');\n    const [editNameInput, setEditNameInput] = useState(false);\n    const [editMailInput, setEditMailInput] = useState(false);\n    const [password, setPassword] = useState('');\n    const [confirmPassword, setConfirmPassword] = useState('');\n    const [newPassword, setNewPassword] = useState('');\n    const [typeInput, setTypeInput] = useState('password');\n    const [typeInputNewPassword, setTypeInputNewPassword] = useState('password');\n    const [typeInputConfirmPassword, setTypeInputConfirmPassword] = useState('password');\n    const [areaPassword, setAreaPassword] = useState(false);\n\n\n    function backHome(){\n        history.push('/home/');\n      }\n\n    function transformNameInput(){\n        setEditNameInput(true);    \n    }\n\n    function transformEmailInput(){\n        setEditMailInput(true);    \n    }\n\n    function editNameCancel(){\n        setEditNameInput(false);    \n    }\n\n    function editMailCancel(){\n        setEditMailInput(false);    \n    }\n\n    async function handleEdit(){\n        try{\n            const body ={\n              name: editName,\n              email: editMail\n            }\n\n            api.defaults.headers.common.Authorization = 'Bearer ' + token;\n            await api.patch(`/me`, body);\n\n            if(editNameInput === true){\n                setEditNameInput(false);\n            }else {\n                setEditMailInput(false);\n            }\n\n            getInfoProfile();\n          }\n          catch(error){\n            alert('Erro ao tentar atualizar perfil, o email ultilizado já existe!')\n            console.log(error);\n\n          }\n    }\n\n    function transformPasswordInput(){\n        setAreaPassword(true);\n    }\n\n    function transformCancelAreaPassword(){\n        setAreaPassword(false);\n    }\n\n    async function handleNewPassword(){\n        if(password === '' || newPassword === ''){\n            alert('Preencha todos os campos para trocar de senha.');\n            return\n        }else if(confirmPassword !== newPassword){\n            alert('Por favor insira a nova senha e a confirmação de senha iguais!');\n            return\n        }\n\n        try{\n            const body ={\n                password: password,\n                newPassword: newPassword\n              }\n  \n              api.defaults.headers.common.Authorization = 'Bearer ' + token;\n              await api.patch(`/me/newPassword`, body);\n              alert('Senha atualizada com sucesso!!!');\n              setAreaPassword(false);\n              setPassword('');\n              setNewPassword('');\n        }\n        catch(error){\n            alert('Erro ao tentar trocar senha, insira a sua senha corretamente!');\n            console.log(`Erro ao requisitar atroca de senha \"/me/newPassword\" ${error}`);\n        }\n    }\n\n    async function getInfoProfile(){\n        try{\n            const response = await api.get('/me', {\n                headers:{\n                'Content-type': 'application/json',\n                'Authorization': `Bearer ${token}`,\n                'Accept': '*/*'\n                }\n            });\n            const data = response.data;\n            setUserData(data);\n            setEditName(data.name);\n            setEditMail(data.email);\n        }\n        catch(error){\n            alert('Erro ao requisitar informações de perfil, verifique sua internet!')\n            console.log(`Erro ao requisitar informações de perfil do servidor \"/me\" ${error}`);\n        }\n    }\n\n    useEffect(()=> {\n        getInfoProfile();\n    }, [])\n\n    return(\n        <div className='containerProfile'>\n            <div onClick={backHome}>\n                <ArrowBackIosIcon id='arrow'/>\n            </div>\n            {!areaPassword ?\n                <fieldset className='viewInfo'>\n                <legend>Meu Perfil</legend>\n                    \n                    {editNameInput ?\n                        <div className='areaInfo'>\n                            <AssignmentIndIcon id='iconProfile'/>\n                            <input value={editName} id='inputProfile' onChange={e=> setEditName(e.target.value)} type='text' alt='Mudar nome' />\n                            <button onClick={handleEdit} id='buttonProfile'>Confirmar</button>\n                            <button onClick={editNameCancel} id='buttonProfile'>Cancelar</button>\n                        </div>\n                    :\n                        <div className='areaInfo'>\n                            <AssignmentIndIcon id='iconProfile'/>\n                            <label>{userData.name}</label>\n                            <button onClick={transformNameInput} id='buttonProfile'>Editar</button>\n                        </div>\n                    }\n                    {editMailInput ?\n                        <div className='areaInfo'>\n                            <EmailIcon id='iconProfile'/>\n                            <input value={editMail} id='inputProfile' onChange={e=> setEditMail(e.target.value)} type='text' alt='Mudar e-mail' />\n                            <button onClick={handleEdit} id='buttonProfile'>Confirmar</button>\n                            <button onClick={editMailCancel} id='buttonProfile'>Cancelar</button>\n                        </div>\n                    :\n                        <div className='areaInfo'>\n                            <EmailIcon id='iconProfile'/>\n                            <label>{userData.email}</label>\n                            <button onClick={transformEmailInput} id='buttonProfile'>Editar</button>\n                        </div>\n                    }\n                    <div className='areaInfo'>\n                        <PersonIcon id='iconProfile'/>\n                        <label>Usuário(a): {userData.type}</label>\n                    </div>\n                    <div className='areaInfo'>\n                        <KeyIcon id='iconProfile'/>\n                        <label><button onClick={transformPasswordInput} id='buttonAreaPassword'>Trocar de senha</button></label>\n                    </div>\n                </fieldset>\n            :\n                <fieldset className='viewInfo'>\n                <legend>Troca de senha</legend>\n                    <div className='areaInfo'>\n                        <label>Senha:</label>\n                        <input value={password} id='inputProfilePassword' onChange={e=> setPassword(e.target.value)} type={typeInput} alt='senha' />\n                        <RemoveRedEyeIcon id='iconProfile' onClick={()=> typeInput === 'password' ? setTypeInput('text') : setTypeInput('password')}/>\n                    </div>\n                    <div className='areaInfo'>\n                        <label>Nova senha:</label>\n                        <input value={newPassword} id='inputProfilePassword' onChange={e=> setNewPassword(e.target.value)} type={typeInputNewPassword} alt='nova senha' />\n                        <RemoveRedEyeIcon id='iconProfile' onClick={()=> typeInputNewPassword === 'password' ? setTypeInputNewPassword('text') : setTypeInputNewPassword('password')}/>\n                    </div>\n                    <div className='areaInfo'>\n                        <label>Confirmar nova senha:</label>\n                        <input value={confirmPassword} id='inputProfilePassword' onChange={e=> setConfirmPassword(e.target.value)} type={typeInputConfirmPassword} alt='confirmar senha' />\n                        <RemoveRedEyeIcon id='iconProfile' onClick={()=> typeInputConfirmPassword === 'password' ? setTypeInputConfirmPassword('text') : setTypeInputConfirmPassword('password')}/>\n                    </div>\n                    <div className='areaInfo'>\n                        <label><button onClick={handleNewPassword} id='buttonPassword'>Trocar de senha</button></label>\n                        <label><button onClick={transformCancelAreaPassword} id='buttonPassword'>Cancelar</button></label>\n                    </div>\n                </fieldset>\n            }\n            <VersionApp />\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}