{"ast":null,"code":"import _regeneratorRuntime from\"/home/max/Documentos/microsys/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/max/Documentos/microsys/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/max/Documentos/microsys/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import{useHistory}from'react-router-dom';import api from'../../services/api';import Paper from'@mui/material/Paper';import Table from'@mui/material/Table';import TableBody from'@mui/material/TableBody';import TableCell from'@mui/material/TableCell';import TableContainer from'@mui/material/TableContainer';import TableHead from'@mui/material/TableHead';import TablePagination from'@mui/material/TablePagination';import TableRow from'@mui/material/TableRow';import EditIcon from'@mui/icons-material/Edit';import DeleteForeverIcon from'@mui/icons-material/DeleteForever';import VisibilityIcon from'@mui/icons-material/Visibility';import'./TableFungic.css';import{AuthContext}from'../../contexts/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function StickyHeadTable(_ref){var dataFungic=_ref.dataFungic,getFungic=_ref.getFungic;var history=useHistory();var _useContext=useContext(AuthContext),token=_useContext.token;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),page=_useState2[0],setPage=_useState2[1];var _useState3=useState(5),_useState4=_slicedToArray(_useState3,2),rowsPerPage=_useState4[0],setRowsPerPage=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),buttonUpdate=_useState6[0],setButtonUpdate=_useState6[1];var columns=[{id:'codigo',label:'Código',minWidth:130},{id:'descricaoIsolado',label:'Descrição',minWidth:130},{id:'cor',label:'Cor',minWidth:130},{id:'propriedades',label:'Propriedades',minWidth:130},{id:'forma',label:'Forma',minWidth:130},{id:'textura',label:'Textura',minWidth:130}];var handleChangePage=function handleChangePage(event,newPage){setPage(newPage);};var handleChangeRowsPerPage=function handleChangeRowsPerPage(event){setRowsPerPage(+event.target.value);setPage(0);};var directionEdit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(item,itemMorph,itemHost){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:history.push({pathname:'adicao-fungica',codigo:item.codigo,identMolecular:item.identMolecular,cor:item.cor,corVerso:item.corVerso,pigmento:item.pigmento,textura:item.textura,forma:item.forma,borda:item.borda,superficie:item.superficie,elevacao:item.elevacao,esporula:item.esporula,tipoCresc:item.tipoCresc,propriedades:item.propriedades,meioIsolamento:item.meioIsolamento,tempIncubacao:item.tempIncubacao,descricaoIsolado:item.descricaoIsolado,dataColeta:item.dataColeta,dataReativacao:item.dataReativacao,localColeta:item.localColeta,morfologia:itemMorph[0].descricao,hospedeiro:itemHost[0].descricao,morfologiaId:itemMorph[0].id,hospedeiroId:itemHost[0].id,urlImagem:item.urlImagem,urlImagemVerso:item.urlImagemVerso,urlImagemMicro:item.urlImagemMicro,itemId:item.id,buttonUpdate:buttonUpdate});case 1:case\"end\":return _context.stop();}}},_callee);}));return function directionEdit(_x,_x2,_x3){return _ref2.apply(this,arguments);};}();function getMorphological(_x4){return _getMorphological.apply(this,arguments);}function _getMorphological(){_getMorphological=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(item){var responseMorph,resultMorph,itemMorph,responseHost,resultHost,itemHost;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return api.get('/morfologias',{headers:{'Content-type':'application/json','Authorization':\"Bearer \".concat(token),'Accept':'*/*'}});case 3:responseMorph=_context3.sent;resultMorph=responseMorph.data;itemMorph=resultMorph.filter(function(i){return i.id===item.morfologiaId;});_context3.next=8;return api.get('/hospedeiros',{headers:{'Content-type':'application/json','Authorization':\"Bearer \".concat(token),'Accept':'*/*'}});case 8:responseHost=_context3.sent;resultHost=responseHost.data;itemHost=resultHost.filter(function(i){return i.id===item.hospedeiroId;});directionEdit(item,itemMorph,itemHost);_context3.next=17;break;case 14:_context3.prev=14;_context3.t0=_context3[\"catch\"](0);console.log('erro na listagem:',_context3.t0);case 17:case\"end\":return _context3.stop();}}},_callee3,null,[[0,14]]);}));return _getMorphological.apply(this,arguments);}var directionRemove=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(item){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:res=window.confirm('Sabia que além de remover, você pode desativar ou ativar um registro, deseja mesmo remover este usuário ?');if(!(res===true)){_context2.next=14;break;}_context2.prev=2;_context2.next=5;return api.delete(\"/fungos/\".concat(item.id),{data:{foo:'bar'}});case 5:alert('Registro excluído com sucesso!');getFungic();_context2.next=13;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](2);console.log(_context2.t0);alert('Erro ao tentar excluir este registro.');case 13:return _context2.abrupt(\"return\");case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[2,9]]);}));return function directionRemove(_x5){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Paper,{sx:{width:'100%',overflow:'hidden'},children:[/*#__PURE__*/_jsx(TableContainer,{sx:{maxHeight:440},children:/*#__PURE__*/_jsxs(Table,{stickyHeader:true,\"aria-label\":\"sticky table\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsx(TableRow,{children:columns.map(function(column){return/*#__PURE__*/_jsx(TableCell,{align:column.align,style:{minWidth:column.minWidth},children:column.label},column.id);})})}),/*#__PURE__*/_jsx(TableBody,{children:dataFungic.slice(page*rowsPerPage,page*rowsPerPage+rowsPerPage).map(function(row){return/*#__PURE__*/_jsxs(TableRow,{hover:true,role:\"checkbox\",tabIndex:-1,children:[columns.map(function(column){var value=row[column.id];return/*#__PURE__*/_jsx(TableCell,{align:column.align,children:column.format&&typeof value==='number'?column.format(value):value},column.id);}),/*#__PURE__*/_jsxs(\"div\",{className:\"areaActions\",children:[/*#__PURE__*/_jsx(VisibilityIcon,{id:\"icon\",onClick:function onClick(){return getMorphological(row);}}),/*#__PURE__*/_jsx(EditIcon,{id:\"icon\",onClick:function onClick(){return getMorphological(row);}}),/*#__PURE__*/_jsx(DeleteForeverIcon,{id:\"icon\",onClick:function onClick(){return directionRemove(row);}})]})]},row.code);})})]})}),/*#__PURE__*/_jsx(TablePagination,{rowsPerPageOptions:[5,25,100],component:\"div\",count:dataFungic.length,rowsPerPage:rowsPerPage,page:page,onPageChange:handleChangePage,onRowsPerPageChange:handleChangeRowsPerPage})]});}// import * as React from 'react';\n// import './table.css';\n// import EditIcon from '@mui/icons-material/Edit';\n// import DeleteForeverIcon from '@mui/icons-material/DeleteForever';\n// export default function DataTable() {\n//   return (\n//     <div className='container'>\n//       <div className='areaFormulary2'>\n//             <div id='textUser'>\n//                 <span>Lista de microorganismos fúngicos:</span>\n//             </div>\n//             <div className='listHeader'>\n//                 <span id=\"idEmail\">Descrição</span>\n//                 <span id=\"idEmail\">Cor</span>\n//                 <span id=\"idEmail\">Propriedades</span>\n//                 <span id=\"idEmail\">Forma</span>\n//                 <span id=\"idEmail\">Tipo</span>\n//             </div>\n//             <div className='listUser'>\n//                 {\n//                 data.map(m => (\n//                     <div className='containerUser'>\n//                     {loading ?\n//                         <ProgressBar />\n//                         :\n//                         <>\n//                         <div className='listUsers'>\n//                             <span>{m.name}</span>\n//                         </div>\n//                         <div className='listUsers'>\n//                             <span>{m.email}</span>\n//                         </div>\n//                         </>\n//                     }\n//                     <div className='options'>\n//                         <EditIcon id=\"icon\"/>\n//                         <DeleteForeverIcon id=\"icon\"/>\n//                     </div>\n//                     </div>\n//                 ))\n//                 }\n//             </div>\n//         </div>\n//     </div>\n//   );\n// }","map":{"version":3,"sources":["/home/max/Documentos/microsys/src/components/TableFungic/index.js"],"names":["React","useState","useContext","useHistory","api","Paper","Table","TableBody","TableCell","TableContainer","TableHead","TablePagination","TableRow","EditIcon","DeleteForeverIcon","VisibilityIcon","AuthContext","StickyHeadTable","dataFungic","getFungic","history","token","page","setPage","rowsPerPage","setRowsPerPage","buttonUpdate","setButtonUpdate","columns","id","label","minWidth","handleChangePage","event","newPage","handleChangeRowsPerPage","target","value","directionEdit","item","itemMorph","itemHost","push","pathname","codigo","identMolecular","cor","corVerso","pigmento","textura","forma","borda","superficie","elevacao","esporula","tipoCresc","propriedades","meioIsolamento","tempIncubacao","descricaoIsolado","dataColeta","dataReativacao","localColeta","morfologia","descricao","hospedeiro","morfologiaId","hospedeiroId","urlImagem","urlImagemVerso","urlImagemMicro","itemId","getMorphological","get","headers","responseMorph","resultMorph","data","filter","i","responseHost","resultHost","console","log","directionRemove","res","window","confirm","delete","foo","alert","width","overflow","maxHeight","map","column","align","slice","row","format","code","length"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport api from '../../services/api';\nimport Paper from '@mui/material/Paper';\nimport Table from '@mui/material/Table';\nimport TableBody from '@mui/material/TableBody';\nimport TableCell from '@mui/material/TableCell';\nimport TableContainer from '@mui/material/TableContainer';\nimport TableHead from '@mui/material/TableHead';\nimport TablePagination from '@mui/material/TablePagination';\nimport TableRow from '@mui/material/TableRow';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteForeverIcon from '@mui/icons-material/DeleteForever';\nimport VisibilityIcon from '@mui/icons-material/Visibility';\nimport './TableFungic.css';\nimport { AuthContext } from '../../contexts/auth';\n\nexport default function StickyHeadTable({ dataFungic, getFungic }) {\n  let history = useHistory();\n  const { token } = useContext(AuthContext);\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(5);\n  const [buttonUpdate, setButtonUpdate] = useState(true);\n  \n\n  const columns = [\n    { id: 'codigo', label: 'Código', minWidth: 130 },\n    { id: 'descricaoIsolado', label: 'Descrição', minWidth: 130 },\n    { id: 'cor', label: 'Cor', minWidth: 130 },\n    { id: 'propriedades', label: 'Propriedades', minWidth: 130 },\n    { id: 'forma', label: 'Forma', minWidth: 130 },\n    { id: 'textura', label: 'Textura', minWidth: 130 },\n    \n  ];\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = (event) => {\n    setRowsPerPage(+event.target.value);\n    setPage(0);\n  };\n\n  const directionEdit = async (item, itemMorph, itemHost)=> {\n    \n    history.push({pathname: 'adicao-fungica', \n    codigo: item.codigo,\n    identMolecular: item.identMolecular,\n    cor: item.cor,\n    corVerso: item.corVerso,\n    pigmento: item.pigmento,\n    textura: item.textura,\n    forma: item.forma,\n    borda: item.borda,\n    superficie: item.superficie, \n    elevacao: item.elevacao,\n    esporula: item.esporula,\n    tipoCresc: item.tipoCresc,\n    propriedades: item.propriedades,\n    meioIsolamento: item.meioIsolamento,\n    tempIncubacao: item.tempIncubacao,\n    descricaoIsolado: item.descricaoIsolado,\n    dataColeta: item.dataColeta,\n    dataReativacao: item.dataReativacao,\n    localColeta: item.localColeta,\n    morfologia: itemMorph[0].descricao,\n    hospedeiro: itemHost[0].descricao,\n    morfologiaId: itemMorph[0].id,\n    hospedeiroId: itemHost[0].id,\n    urlImagem: item.urlImagem,\n    urlImagemVerso: item.urlImagemVerso,\n    urlImagemMicro: item.urlImagemMicro,\n    itemId: item.id,\n    buttonUpdate: buttonUpdate\n    });\n\n  }\n\n  async function getMorphological(item){\n    try{\n        let responseMorph = await api.get('/morfologias',{\n          headers:{\n            'Content-type': 'application/json',\n            'Authorization': `Bearer ${token}`,\n            'Accept': '*/*'\n          }\n        })\n        const resultMorph = responseMorph.data;\n        const itemMorph = resultMorph.filter(i => {\n          return i.id === item.morfologiaId ;\n        })\n\n      const responseHost = await api.get('/hospedeiros',{\n        headers:{\n          'Content-type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n          'Accept': '*/*'\n        }\n      })\n        const resultHost = responseHost.data;\n        const itemHost = resultHost.filter(i => {\n            return i.id === item.hospedeiroId;\n        });\n\n      directionEdit(item, itemMorph, itemHost);\n    }\n    catch(error){\n        console.log('erro na listagem:', error);\n    }\n    \n  }\n\n  const directionRemove = async (item) => {\n    const res = window.confirm('Sabia que além de remover, você pode desativar ou ativar um registro, deseja mesmo remover este usuário ?');\n      if(res === true){\n\n        try{\n          await api.delete(`/fungos/${item.id}`,  {\n            data: {foo: 'bar'}\n          })\n          alert('Registro excluído com sucesso!');\n          getFungic();\n        }\n        catch(error){\n          console.log(error)\n          alert('Erro ao tentar excluir este registro.');\n        }\n        return\n      }\n  }\n\n\n  return (\n    <Paper sx={{ width: '100%', overflow: 'hidden' }}>\n      <TableContainer sx={{ maxHeight: 440 }}>\n        <Table stickyHeader aria-label=\"sticky table\">\n          <TableHead>\n            <TableRow>\n              {columns.map((column) => (\n                <TableCell\n                  key={column.id}\n                  align={column.align}\n                  style={{ minWidth: column.minWidth }}\n                >\n                  {column.label}\n                </TableCell>\n              ))}\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {dataFungic\n              .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n              .map((row) => {\n                return (\n                  <TableRow hover role=\"checkbox\" tabIndex={-1} key={row.code}>\n                    {columns.map((column) => {\n                      const value = row[column.id];\n                      return (\n                        <TableCell key={column.id} align={column.align}>\n                          {column.format && typeof value === 'number'\n                            ? column.format(value)\n                            : value}\n                        </TableCell>\n                      );\n                    })}\n                      <div className='areaActions'>\n                        <VisibilityIcon id=\"icon\" onClick={()=> getMorphological(row)} />\n                        <EditIcon id=\"icon\" onClick={()=> getMorphological(row)} />\n                        <DeleteForeverIcon id=\"icon\" onClick={()=> directionRemove(row)} />\n                      </div>\n                  </TableRow>\n                );\n              })}\n          </TableBody>\n        </Table>\n      </TableContainer>\n      <TablePagination\n        rowsPerPageOptions={[5, 25, 100]}\n        component=\"div\"\n        count={dataFungic.length}\n        rowsPerPage={rowsPerPage}\n        page={page}\n        onPageChange={handleChangePage}\n        onRowsPerPageChange={handleChangeRowsPerPage}\n      />\n    </Paper>\n  );\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// import * as React from 'react';\n// import './table.css';\n// import EditIcon from '@mui/icons-material/Edit';\n// import DeleteForeverIcon from '@mui/icons-material/DeleteForever';\n\n\n// export default function DataTable() {\n//   return (\n//     <div className='container'>\n//       <div className='areaFormulary2'>\n//             <div id='textUser'>\n//                 <span>Lista de microorganismos fúngicos:</span>\n//             </div>\n//             <div className='listHeader'>\n//                 <span id=\"idEmail\">Descrição</span>\n//                 <span id=\"idEmail\">Cor</span>\n//                 <span id=\"idEmail\">Propriedades</span>\n//                 <span id=\"idEmail\">Forma</span>\n//                 <span id=\"idEmail\">Tipo</span>\n//             </div>\n//             <div className='listUser'>\n//                 {\n//                 data.map(m => (\n//                     <div className='containerUser'>\n//                     {loading ?\n//                         <ProgressBar />\n//                         :\n//                         <>\n//                         <div className='listUsers'>\n//                             <span>{m.name}</span>\n//                         </div>\n//                         <div className='listUsers'>\n//                             <span>{m.email}</span>\n//                         </div>\n//                         </>\n//                     }\n//                     <div className='options'>\n//                         <EditIcon id=\"icon\"/>\n//                         <DeleteForeverIcon id=\"icon\"/>\n//                     </div>\n//                     </div>\n//                 ))\n//                 }\n//             </div>\n            \n//         </div>\n//     </div>\n//   );\n// }"]},"metadata":{},"sourceType":"module"}