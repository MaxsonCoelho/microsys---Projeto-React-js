{"ast":null,"code":"var _jsxFileName = \"/home/max/Documentos/microsys/src/pages/Profile/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport api from '../../services/api';\nimport { useHistory } from 'react-router-dom';\nimport './profile.css';\nimport AssignmentIndIcon from '@mui/icons-material/AssignmentInd';\nimport EmailIcon from '@mui/icons-material/Email';\nimport PersonIcon from '@mui/icons-material/Person';\nimport ArrowBackIosIcon from '@mui/icons-material/ArrowBackIos';\nimport KeyIcon from '@mui/icons-material/Key';\nimport RemoveRedEyeIcon from '@mui/icons-material/RemoveRedEye';\nimport { AuthContext } from '../../contexts/auth';\nimport VersionApp from '../../components/VersionApp';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Profile() {\n  _s();\n\n  let history = useHistory();\n  const {\n    token\n  } = useContext(AuthContext);\n  const [userData, setUserData] = useState('');\n  const [editName, setEditName] = useState('');\n  const [editMail, setEditMail] = useState('');\n  const [editNameInput, setEditNameInput] = useState(false);\n  const [editMailInput, setEditMailInput] = useState(false);\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [typeInput, setTypeInput] = useState('password');\n  const [typeInputNewPassword, setTypeInputNewPassword] = useState('password');\n  const [typeInputConfirmPassword, setTypeInputConfirmPassword] = useState('password');\n  const [areaPassword, setAreaPassword] = useState(false);\n\n  function backHome() {\n    history.push('/home/');\n  }\n\n  function transformNameInput() {\n    setEditNameInput(true);\n  }\n\n  function transformEmailInput() {\n    setEditMailInput(true);\n  }\n\n  function editNameCancel() {\n    setEditNameInput(false);\n  }\n\n  function editMailCancel() {\n    setEditMailInput(false);\n  }\n\n  async function handleEdit() {\n    try {\n      const body = {\n        name: editName,\n        email: editMail\n      };\n      api.defaults.headers.common.Authorization = 'Bearer ' + token;\n      await api.patch(`/me`, body);\n\n      if (editNameInput === true) {\n        setEditNameInput(false);\n      } else {\n        setEditMailInput(false);\n      }\n\n      getInfoProfile();\n    } catch (error) {\n      alert('Erro ao tentar atualizar perfil, o email ultilizado já existe!');\n      console.log(error);\n    }\n  }\n\n  function transformPasswordInput() {\n    setAreaPassword(true);\n  }\n\n  function transformCancelAreaPassword() {\n    setAreaPassword(false);\n  }\n\n  async function handleNewPassword() {\n    if (password === '' || newPassword === '') {\n      alert('Preencha todos os campos para trocar de senha.');\n      return;\n    } else if (confirmPassword !== newPassword) {\n      alert('Por favor insira a nova senha e a confirmação de senha iguais!');\n      return;\n    }\n\n    try {\n      const body = {\n        password: password,\n        newPassword: newPassword\n      };\n      api.defaults.headers.common.Authorization = 'Bearer ' + token;\n      await api.patch(`/me/newPassword`, body);\n      alert('Senha atualizada com sucesso!!!');\n      setAreaPassword(false);\n      setPassword('');\n      setNewPassword('');\n    } catch (error) {\n      alert('Erro ao tentar trocar senha, insira a sua senha corretamente!');\n      console.log(`Erro ao requisitar atroca de senha \"/me/newPassword\" ${error}`);\n    }\n  }\n\n  async function getInfoProfile() {\n    try {\n      const response = await api.get('/me', {\n        headers: {\n          'Content-type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n          'Accept': '*/*'\n        }\n      });\n      const data = response.data;\n      setUserData(data);\n      setEditName(data.name);\n      setEditMail(data.email);\n    } catch (error) {\n      alert('Erro ao requisitar informações de perfil, verifique sua internet!');\n      console.log(`Erro ao requisitar informações de perfil do servidor \"/me\" ${error}`);\n    }\n  }\n\n  useEffect(() => {\n    getInfoProfile();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"containerProfile\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: backHome,\n      children: /*#__PURE__*/_jsxDEV(ArrowBackIosIcon, {\n        id: \"arrow\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }, this), !areaPassword ? /*#__PURE__*/_jsxDEV(\"fieldset\", {\n      className: \"viewInfo\",\n      children: [/*#__PURE__*/_jsxDEV(\"legend\", {\n        children: \"Meu Perfil\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }, this), editNameInput ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"areaInfo\",\n        children: [/*#__PURE__*/_jsxDEV(AssignmentIndIcon, {\n          id: \"iconProfile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: editName,\n          id: \"inputProfile\",\n          onChange: e => setEditName(e.target.value),\n          type: \"text\",\n          alt: \"Mudar nome\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleEdit,\n          id: \"buttonProfile\",\n          children: \"Confirmar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: editNameCancel,\n          id: \"buttonProfile\",\n          children: \"Cancelar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"areaInfo\",\n        children: [/*#__PURE__*/_jsxDEV(AssignmentIndIcon, {\n          id: \"iconProfile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: userData.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: transformNameInput,\n          id: \"buttonProfile\",\n          children: \"Editar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 25\n      }, this), editMailInput ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"areaInfo\",\n        children: [/*#__PURE__*/_jsxDEV(EmailIcon, {\n          id: \"iconProfile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: editMail,\n          id: \"inputProfile\",\n          onChange: e => setEditMail(e.target.value),\n          type: \"text\",\n          alt: \"Mudar e-mail\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleEdit,\n          id: \"buttonProfile\",\n          children: \"Confirmar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: editMailCancel,\n          id: \"buttonProfile\",\n          children: \"Cancelar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"areaInfo\",\n        children: [/*#__PURE__*/_jsxDEV(EmailIcon, {\n          id: \"iconProfile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: userData.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: transformEmailInput,\n          id: \"buttonProfile\",\n          children: \"Editar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"areaInfo\",\n        children: [/*#__PURE__*/_jsxDEV(PersonIcon, {\n          id: \"iconProfile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Usu\\xE1rio(a): \", userData.type]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"areaInfo\",\n        children: [/*#__PURE__*/_jsxDEV(KeyIcon, {\n          id: \"iconProfile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: transformPasswordInput,\n            id: \"buttonAreaPassword\",\n            children: \"Trocar de senha\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 32\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"fieldset\", {\n      className: \"viewInfo\",\n      children: [/*#__PURE__*/_jsxDEV(\"legend\", {\n        children: \"Troca de senha\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"areaInfo\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Senha:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: password,\n          id: \"inputProfilePassword\",\n          onChange: e => setPassword(e.target.value),\n          type: typeInput,\n          alt: \"senha\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(RemoveRedEyeIcon, {\n          id: \"iconProfile\",\n          onClick: () => typeInput === 'password' ? setTypeInput('text') : setTypeInput('password')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"areaInfo\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Nova senha:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: newPassword,\n          id: \"inputProfilePassword\",\n          onChange: e => setNewPassword(e.target.value),\n          type: typeInputNewPassword,\n          alt: \"nova senha\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(RemoveRedEyeIcon, {\n          id: \"iconProfile\",\n          onClick: () => typeInputNewPassword === 'password' ? setTypeInputNewPassword('text') : setTypeInputNewPassword('password')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"areaInfo\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Confirmar nova senha:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: confirmPassword,\n          id: \"inputProfilePassword\",\n          onChange: e => setConfirmPassword(e.target.value),\n          type: typeInputConfirmPassword,\n          alt: \"confirmar senha\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(RemoveRedEyeIcon, {\n          id: \"iconProfile\",\n          onClick: () => typeInputConfirmPassword === 'password' ? setTypeInputConfirmPassword('text') : setTypeInputConfirmPassword('password')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"areaInfo\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleNewPassword,\n            id: \"buttonPassword\",\n            children: \"Trocar de senha\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 32\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: transformCancelAreaPassword,\n            id: \"buttonPassword\",\n            children: \"Cancelar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 32\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(VersionApp, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Profile, \"c/KlcEDIx7w6hiI3SeSJeFGuDq8=\", false, function () {\n  return [useHistory];\n});\n\n_c = Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["/home/max/Documentos/microsys/src/pages/Profile/index.js"],"names":["React","useState","useEffect","useContext","api","useHistory","AssignmentIndIcon","EmailIcon","PersonIcon","ArrowBackIosIcon","KeyIcon","RemoveRedEyeIcon","AuthContext","VersionApp","Profile","history","token","userData","setUserData","editName","setEditName","editMail","setEditMail","editNameInput","setEditNameInput","editMailInput","setEditMailInput","password","setPassword","confirmPassword","setConfirmPassword","newPassword","setNewPassword","typeInput","setTypeInput","typeInputNewPassword","setTypeInputNewPassword","typeInputConfirmPassword","setTypeInputConfirmPassword","areaPassword","setAreaPassword","backHome","push","transformNameInput","transformEmailInput","editNameCancel","editMailCancel","handleEdit","body","name","email","defaults","headers","common","Authorization","patch","getInfoProfile","error","alert","console","log","transformPasswordInput","transformCancelAreaPassword","handleNewPassword","response","get","data","e","target","value","type"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport api from '../../services/api';\nimport { useHistory } from 'react-router-dom';\nimport './profile.css';\nimport AssignmentIndIcon from '@mui/icons-material/AssignmentInd';\nimport EmailIcon from '@mui/icons-material/Email';\nimport PersonIcon from '@mui/icons-material/Person';\nimport ArrowBackIosIcon from '@mui/icons-material/ArrowBackIos';\nimport KeyIcon from '@mui/icons-material/Key';\nimport RemoveRedEyeIcon from '@mui/icons-material/RemoveRedEye';\nimport { AuthContext } from '../../contexts/auth';\nimport VersionApp from '../../components/VersionApp';\n\nexport default function Profile(){\n    let history = useHistory();\n    const { token } = useContext(AuthContext);\n    const [userData, setUserData] = useState('');\n    const [editName, setEditName] = useState('');\n    const [editMail, setEditMail] = useState('');\n    const [editNameInput, setEditNameInput] = useState(false);\n    const [editMailInput, setEditMailInput] = useState(false);\n    const [password, setPassword] = useState('');\n    const [confirmPassword, setConfirmPassword] = useState('');\n    const [newPassword, setNewPassword] = useState('');\n    const [typeInput, setTypeInput] = useState('password');\n    const [typeInputNewPassword, setTypeInputNewPassword] = useState('password');\n    const [typeInputConfirmPassword, setTypeInputConfirmPassword] = useState('password');\n    const [areaPassword, setAreaPassword] = useState(false);\n\n\n    function backHome(){\n        history.push('/home/');\n      }\n\n    function transformNameInput(){\n        setEditNameInput(true);    \n    }\n\n    function transformEmailInput(){\n        setEditMailInput(true);    \n    }\n\n    function editNameCancel(){\n        setEditNameInput(false);    \n    }\n\n    function editMailCancel(){\n        setEditMailInput(false);    \n    }\n\n    async function handleEdit(){\n        try{\n            const body ={\n              name: editName,\n              email: editMail\n            }\n\n            api.defaults.headers.common.Authorization = 'Bearer ' + token;\n            await api.patch(`/me`, body);\n\n            if(editNameInput === true){\n                setEditNameInput(false);\n            }else {\n                setEditMailInput(false);\n            }\n\n            getInfoProfile();\n          }\n          catch(error){\n            alert('Erro ao tentar atualizar perfil, o email ultilizado já existe!')\n            console.log(error);\n\n          }\n    }\n\n    function transformPasswordInput(){\n        setAreaPassword(true);\n    }\n\n    function transformCancelAreaPassword(){\n        setAreaPassword(false);\n    }\n\n    async function handleNewPassword(){\n        if(password === '' || newPassword === ''){\n            alert('Preencha todos os campos para trocar de senha.');\n            return\n        }else if(confirmPassword !== newPassword){\n            alert('Por favor insira a nova senha e a confirmação de senha iguais!');\n            return\n        }\n\n        try{\n            const body ={\n                password: password,\n                newPassword: newPassword\n              }\n  \n              api.defaults.headers.common.Authorization = 'Bearer ' + token;\n              await api.patch(`/me/newPassword`, body);\n              alert('Senha atualizada com sucesso!!!');\n              setAreaPassword(false);\n              setPassword('');\n              setNewPassword('');\n        }\n        catch(error){\n            alert('Erro ao tentar trocar senha, insira a sua senha corretamente!');\n            console.log(`Erro ao requisitar atroca de senha \"/me/newPassword\" ${error}`);\n        }\n    }\n\n    async function getInfoProfile(){\n        try{\n            const response = await api.get('/me', {\n                headers:{\n                'Content-type': 'application/json',\n                'Authorization': `Bearer ${token}`,\n                'Accept': '*/*'\n                }\n            });\n            const data = response.data;\n            setUserData(data);\n            setEditName(data.name);\n            setEditMail(data.email);\n        }\n        catch(error){\n            alert('Erro ao requisitar informações de perfil, verifique sua internet!')\n            console.log(`Erro ao requisitar informações de perfil do servidor \"/me\" ${error}`);\n        }\n    }\n\n    useEffect(()=> {\n        getInfoProfile();\n    }, [])\n\n    return(\n        <div className='containerProfile'>\n            <div onClick={backHome}>\n                <ArrowBackIosIcon id='arrow'/>\n            </div>\n            {!areaPassword ?\n                <fieldset className='viewInfo'>\n                <legend>Meu Perfil</legend>\n                    \n                    {editNameInput ?\n                        <div className='areaInfo'>\n                            <AssignmentIndIcon id='iconProfile'/>\n                            <input value={editName} id='inputProfile' onChange={e=> setEditName(e.target.value)} type='text' alt='Mudar nome' />\n                            <button onClick={handleEdit} id='buttonProfile'>Confirmar</button>\n                            <button onClick={editNameCancel} id='buttonProfile'>Cancelar</button>\n                        </div>\n                    :\n                        <div className='areaInfo'>\n                            <AssignmentIndIcon id='iconProfile'/>\n                            <label>{userData.name}</label>\n                            <button onClick={transformNameInput} id='buttonProfile'>Editar</button>\n                        </div>\n                    }\n                    {editMailInput ?\n                        <div className='areaInfo'>\n                            <EmailIcon id='iconProfile'/>\n                            <input value={editMail} id='inputProfile' onChange={e=> setEditMail(e.target.value)} type='text' alt='Mudar e-mail' />\n                            <button onClick={handleEdit} id='buttonProfile'>Confirmar</button>\n                            <button onClick={editMailCancel} id='buttonProfile'>Cancelar</button>\n                        </div>\n                    :\n                        <div className='areaInfo'>\n                            <EmailIcon id='iconProfile'/>\n                            <label>{userData.email}</label>\n                            <button onClick={transformEmailInput} id='buttonProfile'>Editar</button>\n                        </div>\n                    }\n                    <div className='areaInfo'>\n                        <PersonIcon id='iconProfile'/>\n                        <label>Usuário(a): {userData.type}</label>\n                    </div>\n                    <div className='areaInfo'>\n                        <KeyIcon id='iconProfile'/>\n                        <label><button onClick={transformPasswordInput} id='buttonAreaPassword'>Trocar de senha</button></label>\n                    </div>\n                </fieldset>\n            :\n                <fieldset className='viewInfo'>\n                <legend>Troca de senha</legend>\n                    <div className='areaInfo'>\n                        <label>Senha:</label>\n                        <input value={password} id='inputProfilePassword' onChange={e=> setPassword(e.target.value)} type={typeInput} alt='senha' />\n                        <RemoveRedEyeIcon id='iconProfile' onClick={()=> typeInput === 'password' ? setTypeInput('text') : setTypeInput('password')}/>\n                    </div>\n                    <div className='areaInfo'>\n                        <label>Nova senha:</label>\n                        <input value={newPassword} id='inputProfilePassword' onChange={e=> setNewPassword(e.target.value)} type={typeInputNewPassword} alt='nova senha' />\n                        <RemoveRedEyeIcon id='iconProfile' onClick={()=> typeInputNewPassword === 'password' ? setTypeInputNewPassword('text') : setTypeInputNewPassword('password')}/>\n                    </div>\n                    <div className='areaInfo'>\n                        <label>Confirmar nova senha:</label>\n                        <input value={confirmPassword} id='inputProfilePassword' onChange={e=> setConfirmPassword(e.target.value)} type={typeInputConfirmPassword} alt='confirmar senha' />\n                        <RemoveRedEyeIcon id='iconProfile' onClick={()=> typeInputConfirmPassword === 'password' ? setTypeInputConfirmPassword('text') : setTypeInputConfirmPassword('password')}/>\n                    </div>\n                    <div className='areaInfo'>\n                        <label><button onClick={handleNewPassword} id='buttonPassword'>Trocar de senha</button></label>\n                        <label><button onClick={transformCancelAreaPassword} id='buttonPassword'>Cancelar</button></label>\n                    </div>\n                </fieldset>\n            }\n            <VersionApp />\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}