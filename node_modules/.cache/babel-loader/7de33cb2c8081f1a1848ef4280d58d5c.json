{"ast":null,"code":"var _jsxFileName = \"/home/max/Documentos/microsys/src/pages/GerencyUsers/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport './gerencyUsers.css';\nimport Header from '../../components/Header';\nimport Button from '@mui/material/Button';\nimport api from '../../services/api';\nimport ProgressBar from '../../components/ProgressBar';\nimport { AuthContext } from '../../contexts/auth';\nimport TableUser from '../../components/TableUser';\nimport ArrowBackIosIcon from '@mui/icons-material/ArrowBackIos';\nimport VersionApp from '../../components/VersionApp';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function GerencyUsers() {\n  _s();\n\n  const {\n    setDataListUsers,\n    token\n  } = useContext(AuthContext);\n  const [title, setTitle] = useState('GERÊNCIAMENTO DE USUÁRIOS');\n  const [visible, setVisible] = useState(true);\n  const [data, setData] = useState([]);\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [userId, setUserId] = useState('');\n  const [master, setMaster] = useState(false);\n  const [buttonMobileVisible, setButtonMobileVisible] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [active, setActive] = React.useState(false);\n  const [offSearch, setOffSearch] = useState(false);\n  const objInputs = {\n    name: setName,\n    email: setEmail,\n    master: setMaster,\n    active: setActive,\n    id: setUserId\n  };\n\n  async function addUser() {\n    if (!name || !email) {\n      alert('Preencha os campos corretamente!');\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      api.defaults.headers.common.Authorization = 'Bearer ' + token;\n      await api.post('/users', {\n        name: name,\n        email: email,\n        master: master\n      });\n      setLoading(false);\n      listUsers();\n      setName('');\n      setEmail('');\n      setMaster(false);\n      setActive(false);\n      alert('Usuário cadastrado com sucesso!');\n    } catch (error) {\n      alert('Erro ao adicionar usuário, verifique sua conexão com a internet.');\n      console.log(error);\n    }\n  }\n\n  async function editUser() {\n    try {\n      const body = {\n        name: name,\n        email: email,\n        master: master\n      };\n      await api.patch(`/users/${userId}`, body, {\n        headers: {\n          'Content-type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n          'Accept': '*/*'\n        }\n      });\n      setLoading(false);\n      listUsers();\n      setName('');\n      setEmail('');\n      setMaster(false);\n      setActive(false);\n      setButtonMobileVisible(false);\n      alert('Usuário atualizado com sucesso!');\n      listUsers();\n    } catch (error) {\n      alert('Erro de requizição ao tentar atualizar usuário, verifique sua internet!');\n      console.log(error);\n    }\n  }\n\n  async function removeUser(item) {\n    try {\n      await api.delete(`/users/${item.id}`, {\n        data: {\n          foo: 'bar'\n        },\n        headers: {\n          'Content-type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n          'Accept': '*/*'\n        }\n      });\n      setName('');\n      setEmail('');\n      setMaster(false);\n      setActive(false);\n      setButtonMobileVisible(false);\n      alert('Usuário removido com sucesso!');\n      listUsers();\n    } catch (error) {\n      alert('Erro ao tentar excluir usuário, verifique sua conexão com a internet!');\n      console.log(error);\n    }\n  }\n\n  function selectMaster() {\n    !master ? setMaster(true) : setMaster(false);\n  }\n\n  function selectActive() {\n    !active ? setActive(true) : setActive(false);\n  }\n\n  function backEdit() {\n    setButtonMobileVisible(false);\n    setName('');\n    setEmail('');\n    setMaster(false);\n    setActive(false);\n    setUserId('');\n  }\n\n  async function listUsers() {\n    setLoading(true);\n\n    try {\n      const response = await api.get('/users', {\n        headers: {\n          'Content-type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n          'Accept': '*/*'\n        }\n      });\n      let res = [];\n      res = response.data;\n      const newArrayFilter = res.filter(function (user) {\n        return user.type !== 'internal';\n      });\n      const reverseList = newArrayFilter.reverse();\n      setDataListUsers(reverseList);\n      setData(reverseList);\n      setLoading(false);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  useEffect(() => {\n    listUsers();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"containerUser\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      title: title,\n      visible: visible,\n      offSearch: offSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"areaFormularyAll\",\n      style: {\n        justifyContent: buttonMobileVisible ? 'center' : 'space-around'\n      },\n      children: [buttonMobileVisible && /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: backEdit,\n        children: /*#__PURE__*/_jsxDEV(ArrowBackIosIcon, {\n          id: \"arrow\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"areaFormularyAdd\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"smallAreaUsers\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Nome:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"name\",\n            id: \"input\",\n            value: name,\n            onChange: e => setName(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"smallAreaUsers\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"E-mail:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"email\",\n            id: \"input\",\n            value: email,\n            onChange: e => setEmail(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"smallAreaCheckBox\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Administrador:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            value: master,\n            checked: master,\n            name: \"adm\",\n            onClick: selectMaster\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"smallAreaCheckBox\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Ativar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            value: active,\n            checked: active,\n            name: \"active\",\n            onClick: selectActive\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this), loading ? /*#__PURE__*/_jsxDEV(ProgressBar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: !buttonMobileVisible ? /*#__PURE__*/_jsxDEV(Button, {\n            onClick: addUser,\n            id: \"btnRegisterUse\",\n            variant: \"contained\",\n            children: \"Cadastrar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(Button, {\n            onClick: editUser,\n            id: \"btnRegisterUse\",\n            variant: \"contained\",\n            children: \"Atualizar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 17\n          }, this)\n        }, void 0, false)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this), !buttonMobileVisible && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"areaFomularyLis\",\n        children: /*#__PURE__*/_jsxDEV(TableUser, {\n          objInputs: objInputs,\n          removeUser: removeUser,\n          setButtonMobileVisible: setButtonMobileVisible\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(VersionApp, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 177,\n    columnNumber: 5\n  }, this);\n}\n\n_s(GerencyUsers, \"sz92ZBJJ3YqJZZhAbp74HLieD/U=\");\n\n_c = GerencyUsers;\n\nvar _c;\n\n$RefreshReg$(_c, \"GerencyUsers\");","map":{"version":3,"sources":["/home/max/Documentos/microsys/src/pages/GerencyUsers/index.js"],"names":["React","useState","useEffect","useContext","Header","Button","api","ProgressBar","AuthContext","TableUser","ArrowBackIosIcon","VersionApp","GerencyUsers","setDataListUsers","token","title","setTitle","visible","setVisible","data","setData","name","setName","email","setEmail","userId","setUserId","master","setMaster","buttonMobileVisible","setButtonMobileVisible","loading","setLoading","active","setActive","offSearch","setOffSearch","objInputs","id","addUser","alert","defaults","headers","common","Authorization","post","listUsers","error","console","log","editUser","body","patch","removeUser","item","delete","foo","selectMaster","selectActive","backEdit","response","get","res","newArrayFilter","filter","user","type","reverseList","reverse","justifyContent","e","target","value"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,OAAO,oBAAP;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,GAAP,MAAgB,oBAAhB;AACA,OAAOC,WAAP,MAAwB,8BAAxB;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,OAAOC,SAAP,MAAsB,4BAAtB;AACA,OAAOC,gBAAP,MAA6B,kCAA7B;AACA,OAAOC,UAAP,MAAuB,6BAAvB;;;AAIA,eAAe,SAASC,YAAT,GAAwB;AAAA;;AACrC,QAAM;AAAEC,IAAAA,gBAAF;AAAoBC,IAAAA;AAApB,MAA8BX,UAAU,CAACK,WAAD,CAA9C;AACA,QAAM,CAACO,KAAD,EAAQC,QAAR,IAAoBf,QAAQ,CAAC,2BAAD,CAAlC;AACA,QAAM,CAACgB,OAAD,EAAUC,UAAV,IAAwBjB,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAACkB,IAAD,EAAOC,OAAP,IAAkBnB,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACoB,IAAD,EAAOC,OAAP,IAAkBrB,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACsB,KAAD,EAAQC,QAAR,IAAoBvB,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACwB,MAAD,EAASC,SAAT,IAAsBzB,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAAC0B,MAAD,EAASC,SAAT,IAAsB3B,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM,CAAC4B,mBAAD,EAAsBC,sBAAtB,IAAgD7B,QAAQ,CAAC,KAAD,CAA9D;AACA,QAAM,CAAC8B,OAAD,EAAUC,UAAV,IAAwB/B,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAACgC,MAAD,EAASC,SAAT,IAAsBlC,KAAK,CAACC,QAAN,CAAe,KAAf,CAA5B;AACA,QAAM,CAACkC,SAAD,EAAYC,YAAZ,IAA4BnC,QAAQ,CAAC,KAAD,CAA1C;AAEA,QAAMoC,SAAS,GAAG;AAChBhB,IAAAA,IAAI,EAAEC,OADU;AAEhBC,IAAAA,KAAK,EAAEC,QAFS;AAGhBG,IAAAA,MAAM,EAAEC,SAHQ;AAIhBK,IAAAA,MAAM,EAAEC,SAJQ;AAKhBI,IAAAA,EAAE,EAAEZ;AALY,GAAlB;;AAQA,iBAAea,OAAf,GAAwB;AAEtB,QAAG,CAAClB,IAAD,IAAS,CAACE,KAAb,EAAmB;AACjBiB,MAAAA,KAAK,CAAC,kCAAD,CAAL;AACA;AACD;;AAEDR,IAAAA,UAAU,CAAC,IAAD,CAAV;;AAEA,QAAG;AACD1B,MAAAA,GAAG,CAACmC,QAAJ,CAAaC,OAAb,CAAqBC,MAArB,CAA4BC,aAA5B,GAA4C,YAAY9B,KAAxD;AACA,YAAMR,GAAG,CAACuC,IAAJ,CAAS,QAAT,EAAmB;AACvBxB,QAAAA,IAAI,EAAEA,IADiB;AAEvBE,QAAAA,KAAK,EAAEA,KAFgB;AAGvBI,QAAAA,MAAM,EAAEA;AAHe,OAAnB,CAAN;AAMAK,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAc,MAAAA,SAAS;AACTxB,MAAAA,OAAO,CAAC,EAAD,CAAP;AACAE,MAAAA,QAAQ,CAAC,EAAD,CAAR;AACAI,MAAAA,SAAS,CAAC,KAAD,CAAT;AACAM,MAAAA,SAAS,CAAC,KAAD,CAAT;AACAM,MAAAA,KAAK,CAAC,iCAAD,CAAL;AACD,KAfD,CAgBA,OAAMO,KAAN,EAAY;AACVP,MAAAA,KAAK,CAAC,kEAAD,CAAL;AACAQ,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;AACF;;AAED,iBAAeG,QAAf,GAAyB;AAEvB,QAAG;AACD,YAAMC,IAAI,GAAE;AACV9B,QAAAA,IAAI,EAAEA,IADI;AAEVE,QAAAA,KAAK,EAAEA,KAFG;AAGVI,QAAAA,MAAM,EAAEA;AAHE,OAAZ;AAKA,YAAMrB,GAAG,CAAC8C,KAAJ,CAAW,UAAS3B,MAAO,EAA3B,EAA8B0B,IAA9B,EAAmC;AACvCT,QAAAA,OAAO,EAAC;AACN,0BAAgB,kBADV;AAEN,2BAAkB,UAAS5B,KAAM,EAF3B;AAGN,oBAAU;AAHJ;AAD+B,OAAnC,CAAN;AAQEkB,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAc,MAAAA,SAAS;AACTxB,MAAAA,OAAO,CAAC,EAAD,CAAP;AACAE,MAAAA,QAAQ,CAAC,EAAD,CAAR;AACAI,MAAAA,SAAS,CAAC,KAAD,CAAT;AACAM,MAAAA,SAAS,CAAC,KAAD,CAAT;AACAJ,MAAAA,sBAAsB,CAAC,KAAD,CAAtB;AACAU,MAAAA,KAAK,CAAC,iCAAD,CAAL;AACAM,MAAAA,SAAS;AACZ,KAvBD,CAwBA,OAAMC,KAAN,EAAY;AACVP,MAAAA,KAAK,CAAC,yEAAD,CAAL;AACAQ,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;AAEF;;AAED,iBAAeM,UAAf,CAA0BC,IAA1B,EAA+B;AAE7B,QAAG;AACD,YAAMhD,GAAG,CAACiD,MAAJ,CAAY,UAASD,IAAI,CAAChB,EAAG,EAA7B,EAAgC;AACpCnB,QAAAA,IAAI,EAAE;AAACqC,UAAAA,GAAG,EAAE;AAAN,SAD8B;AAEpCd,QAAAA,OAAO,EAAC;AACN,0BAAgB,kBADV;AAEN,2BAAkB,UAAS5B,KAAM,EAF3B;AAGN,oBAAU;AAHJ;AAF4B,OAAhC,CAAN;AASAQ,MAAAA,OAAO,CAAC,EAAD,CAAP;AACAE,MAAAA,QAAQ,CAAC,EAAD,CAAR;AACAI,MAAAA,SAAS,CAAC,KAAD,CAAT;AACAM,MAAAA,SAAS,CAAC,KAAD,CAAT;AACAJ,MAAAA,sBAAsB,CAAC,KAAD,CAAtB;AACAU,MAAAA,KAAK,CAAC,+BAAD,CAAL;AACAM,MAAAA,SAAS;AACV,KAjBD,CAkBA,OAAMC,KAAN,EAAY;AACVP,MAAAA,KAAK,CAAC,uEAAD,CAAL;AACAQ,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;AACF;;AAED,WAASU,YAAT,GAAuB;AACrB,KAAC9B,MAAD,GAAUC,SAAS,CAAC,IAAD,CAAnB,GAA4BA,SAAS,CAAC,KAAD,CAArC;AACD;;AAED,WAAS8B,YAAT,GAAuB;AACrB,KAACzB,MAAD,GAAUC,SAAS,CAAC,IAAD,CAAnB,GAA4BA,SAAS,CAAC,KAAD,CAArC;AACD;;AAED,WAASyB,QAAT,GAAmB;AACjB7B,IAAAA,sBAAsB,CAAC,KAAD,CAAtB;AACAR,IAAAA,OAAO,CAAC,EAAD,CAAP;AACAE,IAAAA,QAAQ,CAAC,EAAD,CAAR;AACAI,IAAAA,SAAS,CAAC,KAAD,CAAT;AACAM,IAAAA,SAAS,CAAC,KAAD,CAAT;AACAR,IAAAA,SAAS,CAAC,EAAD,CAAT;AACD;;AAED,iBAAeoB,SAAf,GAA0B;AACxBd,IAAAA,UAAU,CAAC,IAAD,CAAV;;AAEA,QAAG;AACD,YAAM4B,QAAQ,GAAG,MAAMtD,GAAG,CAACuD,GAAJ,CAAQ,QAAR,EAAkB;AACvCnB,QAAAA,OAAO,EAAC;AACN,0BAAgB,kBADV;AAEN,2BAAkB,UAAS5B,KAAM,EAF3B;AAGN,oBAAU;AAHJ;AAD+B,OAAlB,CAAvB;AAQA,UAAIgD,GAAG,GAAG,EAAV;AACAA,MAAAA,GAAG,GAAGF,QAAQ,CAACzC,IAAf;AAEA,YAAM4C,cAAc,GAAGD,GAAG,CAACE,MAAJ,CAAW,UAASC,IAAT,EAAe;AAC/C,eAAOA,IAAI,CAACC,IAAL,KAAc,UAArB;AACD,OAFsB,CAAvB;AAIA,YAAMC,WAAW,GAAGJ,cAAc,CAACK,OAAf,EAApB;AACAvD,MAAAA,gBAAgB,CAACsD,WAAD,CAAhB;AACA/C,MAAAA,OAAO,CAAC+C,WAAD,CAAP;AACAnC,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD,KApBD,CAqBA,OAAMe,KAAN,EAAY;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;AACF;;AAED7C,EAAAA,SAAS,CAAC,MAAK;AACb4C,IAAAA,SAAS;AACV,GAFQ,EAEN,EAFM,CAAT;AAIA,sBACE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA,4BACE,QAAC,MAAD;AAAQ,MAAA,KAAK,EAAE/B,KAAf;AAAsB,MAAA,OAAO,EAAEE,OAA/B;AAAwC,MAAA,SAAS,EAAEkB;AAAnD;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAkC,MAAA,KAAK,EAAE;AAAEkC,QAAAA,cAAc,EAAExC,mBAAmB,GAAI,QAAJ,GAAe;AAApD,OAAzC;AAAA,iBACGA,mBAAmB,iBAChB;AAAK,QAAA,OAAO,EAAE8B,QAAd;AAAA,+BACA,QAAC,gBAAD;AAAkB,UAAA,EAAE,EAAC;AAArB;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,cAFN,eAME;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,gBAAf;AAAA,kCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAO,YAAA,IAAI,EAAC,MAAZ;AAAmB,YAAA,IAAI,EAAC,MAAxB;AAA+B,YAAA,EAAE,EAAC,OAAlC;AAA0C,YAAA,KAAK,EAAEtC,IAAjD;AAAuD,YAAA,QAAQ,EAAEiD,CAAC,IAAGhD,OAAO,CAACgD,CAAC,CAACC,MAAF,CAASC,KAAV;AAA5E;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAKE;AAAK,UAAA,SAAS,EAAC,gBAAf;AAAA,kCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAO,YAAA,IAAI,EAAC,MAAZ;AAAmB,YAAA,IAAI,EAAC,OAAxB;AAAgC,YAAA,EAAE,EAAC,OAAnC;AAA2C,YAAA,KAAK,EAAEjD,KAAlD;AAAyD,YAAA,QAAQ,EAAE+C,CAAC,IAAG9C,QAAQ,CAAC8C,CAAC,CAACC,MAAF,CAASC,KAAV;AAA/E;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBALF,eASE;AAAK,UAAA,SAAS,EAAC,mBAAf;AAAA,kCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAO,YAAA,IAAI,EAAC,UAAZ;AAAuB,YAAA,KAAK,EAAE7C,MAA9B;AAAsC,YAAA,OAAO,EAAEA,MAA/C;AAAuD,YAAA,IAAI,EAAC,KAA5D;AAAkE,YAAA,OAAO,EAAE8B;AAA3E;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBATF,eAaE;AAAK,UAAA,SAAS,EAAC,mBAAf;AAAA,kCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAO,YAAA,IAAI,EAAC,UAAZ;AAAuB,YAAA,KAAK,EAAExB,MAA9B;AAAsC,YAAA,OAAO,EAAEA,MAA/C;AAAuD,YAAA,IAAI,EAAC,QAA5D;AAAqE,YAAA,OAAO,EAAEyB;AAA9E;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAbF,EAiBG3B,OAAO,gBACN,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA,gBADM,gBAGN;AAAA,oBACG,CAACF,mBAAD,gBACC,QAAC,MAAD;AAAQ,YAAA,OAAO,EAAEU,OAAjB;AAA0B,YAAA,EAAE,EAAC,gBAA7B;AAA8C,YAAA,OAAO,EAAC,WAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADD,gBAKC,QAAC,MAAD;AAAQ,YAAA,OAAO,EAAEW,QAAjB;AAA2B,YAAA,EAAE,EAAC,gBAA9B;AAA+C,YAAA,OAAO,EAAC,WAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AANJ,yBApBJ;AAAA;AAAA;AAAA;AAAA;AAAA,cANF,EAuCG,CAACrB,mBAAD,iBACC;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA,+BACE,QAAC,SAAD;AAAW,UAAA,SAAS,EAAEQ,SAAtB;AAAiC,UAAA,UAAU,EAAEgB,UAA7C;AAA0D,UAAA,sBAAsB,EAAEvB;AAAlF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAxCJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF,eA+CE,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,YA/CF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAmDD;;GArNuBlB,Y;;KAAAA,Y","sourcesContent":["import React, { useState, useEffect, useContext } from 'react'\nimport './gerencyUsers.css';\nimport Header from '../../components/Header';\nimport Button from '@mui/material/Button';\nimport api from '../../services/api';\nimport ProgressBar from '../../components/ProgressBar';\nimport { AuthContext } from '../../contexts/auth';\nimport TableUser from '../../components/TableUser';\nimport ArrowBackIosIcon from '@mui/icons-material/ArrowBackIos';\nimport VersionApp from '../../components/VersionApp';\n\n\n\nexport default function GerencyUsers() {\n  const { setDataListUsers, token } = useContext(AuthContext);\n  const [title, setTitle] = useState('GERÊNCIAMENTO DE USUÁRIOS');\n  const [visible, setVisible] = useState(true);\n  const [data, setData] = useState([]);\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [userId, setUserId] = useState('');\n  const [master, setMaster] = useState(false);\n  const [buttonMobileVisible, setButtonMobileVisible] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [active, setActive] = React.useState(false);\n  const [offSearch, setOffSearch] = useState(false);\n\n  const objInputs = {\n    name: setName,\n    email: setEmail,\n    master: setMaster,\n    active: setActive,\n    id: setUserId\n  }\n\n  async function addUser(){\n    \n    if(!name || !email){\n      alert('Preencha os campos corretamente!');\n      return\n    }\n      \n    setLoading(true);\n\n    try{\n      api.defaults.headers.common.Authorization = 'Bearer ' + token;\n      await api.post('/users', {\n        name: name,\n        email: email,\n        master: master,\n      });\n\n      setLoading(false);\n      listUsers();\n      setName('');\n      setEmail('');\n      setMaster(false);\n      setActive(false);\n      alert('Usuário cadastrado com sucesso!');\n    }\n    catch(error){\n      alert('Erro ao adicionar usuário, verifique sua conexão com a internet.')\n      console.log(error);\n    }\n  }\n\n  async function editUser(){\n\n    try{\n      const body ={\n        name: name,\n        email: email,\n        master: master\n      }\n      await api.patch(`/users/${userId}`, body,{\n        headers:{\n          'Content-type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n          'Accept': '*/*'\n        }\n      });\n  \n        setLoading(false);\n        listUsers();\n        setName('');\n        setEmail('');\n        setMaster(false);\n        setActive(false);\n        setButtonMobileVisible(false);\n        alert('Usuário atualizado com sucesso!');\n        listUsers();\n    }\n    catch(error){\n      alert('Erro de requizição ao tentar atualizar usuário, verifique sua internet!')\n      console.log(error);\n    }\n\n  }\n\n  async function removeUser(item){\n\n    try{\n      await api.delete(`/users/${item.id}`, {\n        data: {foo: 'bar'},\n        headers:{\n          'Content-type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n          'Accept': '*/*'\n        }\n      });\n  \n      setName('');\n      setEmail('');\n      setMaster(false);\n      setActive(false);\n      setButtonMobileVisible(false);\n      alert('Usuário removido com sucesso!');\n      listUsers();\n    }\n    catch(error){\n      alert('Erro ao tentar excluir usuário, verifique sua conexão com a internet!');\n      console.log(error);\n    }\n  }\n\n  function selectMaster(){\n    !master ? setMaster(true) : setMaster(false);\n  }\n\n  function selectActive(){\n    !active ? setActive(true) : setActive(false);\n  }\n\n  function backEdit(){\n    setButtonMobileVisible(false);\n    setName('');\n    setEmail('');\n    setMaster(false);\n    setActive(false);\n    setUserId('');\n  }\n\n  async function listUsers(){\n    setLoading(true);\n    \n    try{\n      const response = await api.get('/users', {\n        headers:{\n          'Content-type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n          'Accept': '*/*'\n        }\n      })\n  \n      let res = [];\n      res = response.data;\n      \n      const newArrayFilter = res.filter(function(user) {\n        return user.type !== 'internal'\n      });\n  \n      const reverseList = newArrayFilter.reverse();\n      setDataListUsers(reverseList);\n      setData(reverseList);\n      setLoading(false);  \n    }\n    catch(error){\n      console.log(error);\n    }\n  }\n\n  useEffect(()=> {\n    listUsers();\n  }, [])\n\n  return (\n    <div className=\"containerUser\">\n      <Header title={title} visible={visible} offSearch={offSearch}/>\n      <div className='areaFormularyAll' style={{ justifyContent: buttonMobileVisible ?  'center' : 'space-around'}}>\n        {buttonMobileVisible &&\n            <div onClick={backEdit}>\n            <ArrowBackIosIcon id='arrow'/>\n          </div>\n        }\n        <div className='areaFormularyAdd'>\n          <div className='smallAreaUsers'>\n            <span>Nome:</span>\n            <input type=\"text\" name=\"name\" id=\"input\" value={name} onChange={e=> setName(e.target.value)}/>\n          </div>\n          <div className='smallAreaUsers'>\n            <span>E-mail:</span>\n            <input type=\"text\" name=\"email\" id=\"input\" value={email} onChange={e=> setEmail(e.target.value)}/>\n          </div>\n          <div className='smallAreaCheckBox'>\n            <span>Administrador:</span>\n            <input type=\"checkbox\" value={master} checked={master} name=\"adm\" onClick={selectMaster}/>\n          </div>\n          <div className='smallAreaCheckBox'>\n            <span>Ativar</span>\n            <input type=\"checkbox\" value={active} checked={active} name=\"active\" onClick={selectActive}/>\n          </div>\n          {loading ?\n            <ProgressBar />\n          :\n            <>\n              {!buttonMobileVisible ?\n                <Button onClick={addUser} id=\"btnRegisterUse\" variant=\"contained\"> \n                  Cadastrar\n                </Button>\n              :\n                <Button onClick={editUser} id=\"btnRegisterUse\" variant=\"contained\"> \n                  Atualizar\n                </Button>\n              }\n            </>\n          }\n        </div>\n        {!buttonMobileVisible &&\n          <div className='areaFomularyLis'>\n            <TableUser objInputs={objInputs} removeUser={removeUser}  setButtonMobileVisible={setButtonMobileVisible} />\n          </div>\n        }\n      </div>\n      <VersionApp />\n    </div>\n  )\n}\n "]},"metadata":{},"sourceType":"module"}